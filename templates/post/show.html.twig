{% extends 'base.html.twig' %}

{% block title %}
    {{ post.author.username }} : {{ post.message|slice(0, 50) }}
{% endblock %}

{% block body %}
    <h1>Post from <a href="{{ path('user_profile', {'username': post.author.username}) }}">@{{ post.author.username }}</a></h1>
    <p><i>Posted at <strong>{{ post.published|date('Y-m-d H:i:s') }}</strong></i></p>
    <code>{{ post.message|nl2br }}</code>
    <div>
        {% if is_granted(constant('App\\Like\\Voter\\LikeVoter::LIKE'), post) %}
            <a href="{{ path('post_like', {'id': post.hash}) }}">Like ({{ post.likes }})</a>
        {% elseif is_granted(constant('App\\Like\\Voter\\LikeVoter::UNLIKE'), post) %}
            <a href="{{ path('post_unlike', {'id': post.hash}) }}">Unlike ({{ post.likes }})</a>
        {% else %}
            Likes ({{ post.likes }})
        {% endif %}
    </div>
{% endblock %}
